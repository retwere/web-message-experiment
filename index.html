<html>
  <head>
    <title>foo</title>
    <script lang="javascript">
      function log(msg) {
        const div = document.createElement('div')
        div.innerHTML = msg
        document.body.appendChild(div)
      }

      window.addEventListener("message", (event) => {
        if (!event.origin.startsWith('https://') || !event.origin.endsWith('-colab.googleusercontent.com')) return
        log(JSON.stringify(event))

        if (event.data.action='request') {
          event.source.postMessage({action: 'respond', value: 'foobarbaz'}, event.origin)
        }
      })

      window.addEventListener("load", () => {
        window.parent.postMessage({action: 'ready'}, "*")
      })
    </script>
  </head>
  <body>bar</body>
</html>
